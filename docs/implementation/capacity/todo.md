# TODO: Scrappy Demo Implementation â€“ Inventory Schema, Validations & Flows

This checklist outlines the minimal steps to set up a demo of the BoxFresh inventory management system using Salesforce Flows and validation rules (minimal Apex, if any).

## 1. Inventory Schema (Inventory__c) (Complexity: 3)
- [x] Create custom object: **Inventory__c** ([Inventory Guide](./inventory.md))
    - [x] Define object label, API name, and description ([Inventory Guide](./inventory.md#inventory__c-object))
    - [x] Set object permissions (tab, search, reporting) ([Inventory Guide](./inventory.md#implementation-steps))
    - [ ] Enable deployment in sandbox/demo org ([Inventory Guide](./inventory.md#implementation-steps))
- [x] Add fields: ([Inventory Guide](./inventory.md#field-specifications))
    - [x] Capacity_Units__c (Number, required, default 100) ([Inventory Guide](./inventory.md#capacity_units__c-number))
        - [x] Set field type, label, API name, and default value ([Inventory Guide](./inventory.md#capacity_units__c-number))
        - [x] Add help text and description ([Inventory Guide](./inventory.md#capacity_units__c-number))
    - [x] Total_Units_Consumed__c (Roll-Up Summary: SUM of Material_Stock__c.Units_Consumed__c) ([Inventory Guide](./inventory.md#total_units_consumed__c-roll-up-summary))
        - [x] Configure roll-up summary on related Material_Stock__c ([Inventory Guide](./inventory.md#total_units_consumed__c-roll-up-summary))
        - [x] Test roll-up calculation ([Inventory Guide](./inventory.md#testing-steps))
    - [x] Available_Units__c (Formula: Capacity_Units__c - Total_Units_Consumed__c) ([Inventory Guide](./inventory.md#available_units__c-formula))
        - [x] Write formula ([Inventory Guide](./inventory.md#available_units__c-formula))
        - [x] Validate formula output ([Inventory Guide](./inventory.md#testing-steps))
    - [x] Buffer_Status__c (Formula: Buffer zone logic) ([Inventory Guide](./inventory.md#buffer_status__c-formula))
        - [x] Write buffer status formula (red/yellow/green) ([Inventory Guide](./inventory.md#buffer-management-zones))
        - [x] Test buffer status transitions ([Inventory Guide](./inventory.md#testing-steps))
    - [x] Is_Constraint__c (Checkbox) ([Inventory Guide](./inventory.md#is_constraint__c-checkbox))
        - [x] Add checkbox field ([Inventory Guide](./inventory.md#is_constraint__c-checkbox))
        - [x] Set default value and help text ([Inventory Guide](./inventory.md#is_constraint__c-checkbox))
    - [x] Capacity_Utilization_Percent__c (Formula: % utilization) ([Inventory Guide](./inventory.md#capacity_utilization_percent__c-formula))
        - [x] Write utilization formula ([Inventory Guide](./inventory.md#capacity_utilization_percent__c-formula))
        - [x] Validate percent output ([Inventory Guide](./inventory.md#testing-steps))
- [x] Update page layout: Add all above fields to a "Capacity Management" section ([Inventory Guide](./inventory.md#page-layout-updates))
    - [x] Create new section on layout ([Inventory Guide](./inventory.md#page-layout-updates))
    - [x] Add fields in logical order ([Inventory Guide](./inventory.md#page-layout-updates))
    - [x] Save and assign layout ([Inventory Guide](./inventory.md#page-layout-updates))
- [x] Set field-level security (SysAdmin: all, Standard User: limited) ([Inventory Guide](./inventory.md#field-level-security))
    - [x] Configure field visibility for each profile ([Inventory Guide](./inventory.md#field-level-security))
    - [ ] Test with different user roles ([Inventory Guide](./inventory.md#field-level-security))
    - [ ] Adjust as needed for demo ([Inventory Guide](./inventory.md#field-level-security))

## 2. Material Stock Schema (Material_Stock__c) (Complexity: 3)
- [x] Create custom object: **Material_Stock__c** ([Stock Guide](./stock.md))
    - [x] Define object label, API name, and description ([Stock Guide](./stock.md#material_stock__c-object))
    - [x] Set object permissions (tab, search, reporting) ([Stock Guide](./stock.md#implementation-steps))
    - [ ] Enable deployment in sandbox/demo org ([Stock Guide](./stock.md#implementation-steps))
- [x] Add fields: ([Stock Guide](./stock.md#field-specifications))
    - [x] Inventory__c (Master-Detail to Inventory__c) ([Stock Guide](./stock.md#inventory__c-lookup))
        - [x] Create master-detail relationship ([Stock Guide](./stock.md#inventory__c-lookup))
        - [ ] Add lookup filter if needed ([Stock Guide](./stock.md#inventory__c-lookup))
    - [x] Units_Consumed__c (Number) ([Stock Guide](./stock.md#units_consumed__c-number))
        - [x] Set field type, label, API name ([Stock Guide](./stock.md#units_consumed__c-number))
    - [x] Quantity__c (Number) ([Stock Guide](./stock.md#quantity__c-number))
        - [x] Set field type, label, API name ([Stock Guide](./stock.md#quantity__c-number))
    - [x] Units_Per_Quantity__c (Number) ([Stock Guide](./stock.md#units_per_quantity__c-number))
        - [x] Set field type, label, API name ([Stock Guide](./stock.md#units_per_quantity__c-number))
    - [ ] Capacity_Status__c (Picklist, populated by Flow) ([Stock Guide](./stock.md#capacity_status__c-formula), [Log](./log.md#2024-06-11-architectural-note-capacity_status__c-on-material_stock__c))
        - [ ] Change field type from text to picklist (Below Buffer, Within Buffer, Above Buffer)
        - [ ] Update Flow to set picklist value ([Flows Guide](./flows.md#container-update-flow))
        - [ ] Test Flow and field updates ([Log](./log.md#2024-06-11-architectural-note-capacity_status__c-on-material_stock__c))
        - [ ] Remove/ignore formula referencing Inventory__c.Buffer_Status__c (see [Log](./log.md#2024-06-11-architectural-note-capacity_status__c-on-material_stock__c))
- [x] Add formula/flow: Units_Consumed__c = Quantity__c * Units_Per_Quantity__c ([Stock Guide](./stock.md#automation-for-capacity-calculation))
    - [x] Create formula field or flow ([Stock Guide](./stock.md#automation-for-capacity-calculation))
    - [x] Test calculation with sample data ([Stock Guide](./stock.md#testing-steps))
    - [x] Adjust for edge cases (nulls, zero) ([Stock Guide](./stock.md#considerations))
- [ ] Buffer_Priority__c field dependency ([Stock Guide](./stock.md#field-dependencies))
    - [ ] Recreate field dependency with Capacity_Status__c (picklist) as controlling field
    - [ ] Validate dependency logic in UI
    - [ ] Add help text to Buffer_Priority__c if needed
    - [ ] Document any limitations or user guidance ([Log](./log.md))

## 3. Validation Rules (Complexity: 2)
- [x] On Inventory__c: Prevent_Negative_Capacity (Available_Units__c < 0) ([Validation Guide](./validation.md#validation-rule))
    - [x] Write validation rule formula ([Validation Guide](./validation.md#validation-rule))
    - [x] Add error message and location ([Validation Guide](./validation.md#validation-rule))
- [x] On Material_Stock__c: Prevent adding stock that would exceed container capacity ([Validation Guide](./validation.md#test-scenario-2-material-stock-consumption))
    - [x] Write validation rule formula ([Validation Guide](./validation.md#test-scenario-2-material-stock-consumption))
    - [x] Add error message and location ([Validation Guide](./validation.md#test-scenario-2-material-stock-consumption))

## 4. Flows (Complexity: 4)
- [ ] Capacity Check Flow (on Material_Stock__c create/update): ([Flows Guide](./flows.md#capacity-check-flow))
    - [ ] Design flow logic (decision, assignments, error handling) ([Flows Guide](./flows.md#flow-logic))
    - [ ] Build record-triggered flow in Flow Builder ([Flows Guide](./flows.md#implementation-steps))
    - [ ] Add capacity check and error screen ([Flows Guide](./flows.md#error-handling))
    - [ ] Add buffer threshold alert logic ([Flows Guide](./flows.md#add-alert-creation-logic))
- [ ] Container Update Flow (on Material_Stock__c create/update/delete): ([Flows Guide](./flows.md#container-update-flow))
    - [ ] Design flow logic (context, recalculation, update) ([Flows Guide](./flows.md#flow-logic-1))
    - [ ] Build record-triggered flow in Flow Builder ([Flows Guide](./flows.md#implementation-steps-1))
    - [ ] Add logic to recalculate Inventory__c totals ([Flows Guide](./flows.md#update-containers))
    - [ ] Update buffer status and utilization fields ([Flows Guide](./flows.md#update-containers))
    - [ ] Ensure Capacity_Status__c on Material_Stock__c is updated by Flow ([Log](./log.md#2024-06-11-architectural-note-capacity_status__c-on-material_stock__c))

## 5. Demo/Test Data (Complexity: 2)
- [ ] Create Inventory__c record (Capacity_Units__c = 100) ([Inventory Guide](./inventory.md#testing-steps))
    - [ ] Enter record via UI or Data Import ([Inventory Guide](./inventory.md#testing-steps))
    - [ ] Verify field defaults and layout ([Inventory Guide](./inventory.md#testing-steps))
- [ ] Add Material_Stock__c records to consume capacity ([Stock Guide](./stock.md#testing-steps))
    - [ ] Create records with varying quantities ([Stock Guide](./stock.md#testing-steps))
    - [ ] Check roll-up and buffer status ([Inventory Guide](./inventory.md#testing-steps))
- [ ] Test validation and flow logic (block over-capacity, buffer alerts) ([Validation Guide](./validation.md#test-scenario-2-material-stock-consumption))
    - [ ] Attempt to exceed capacity and verify error ([Validation Guide](./validation.md#test-scenario-2-material-stock-consumption))
    - [ ] Trigger buffer alerts and verify behavior ([Flows Guide](./flows.md#testing-the-flows))
    - [ ] Confirm Capacity_Status__c is updated correctly ([Log](./log.md#2024-06-11-architectural-note-capacity_status__c-on-material_stock__c))

## 6. (Optional) Minimal Apex (Complexity: 1)
- [ ] Only if Flow cannot handle a calculation or batch update ([Flows Guide](./flows.md#optimization-considerations))
    - [ ] Identify logic not feasible in Flow ([Flows Guide](./flows.md#optimization-considerations))
    - [ ] Write minimal Apex class/trigger if needed ([Flows Guide](./flows.md#optimization-considerations))

---
**Goal:** Demo-ready, minimal, flow-driven inventory management with clear validation and buffer logic. No unnecessary Apex. 